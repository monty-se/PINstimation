<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<meta name="description" content="This vignette describes how to install the package PINstimation, and provides several examples on how to use its main functionalities. 
">
<title>Get started • PINstimation</title>
<!-- favicons --><link rel="icon" type="image/png" sizes="16x16" href="../favicon-16x16.png">
<link rel="icon" type="image/png" sizes="32x32" href="../favicon-32x32.png">
<link rel="apple-touch-icon" type="image/png" sizes="180x180" href="../apple-touch-icon.png">
<link rel="apple-touch-icon" type="image/png" sizes="120x120" href="../apple-touch-icon-120x120.png">
<link rel="apple-touch-icon" type="image/png" sizes="76x76" href="../apple-touch-icon-76x76.png">
<link rel="apple-touch-icon" type="image/png" sizes="60x60" href="../apple-touch-icon-60x60.png">
<script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="../deps/bootstrap-5.1.0/bootstrap.min.css" rel="stylesheet">
<script src="../deps/bootstrap-5.1.0/bootstrap.bundle.min.js"></script><link href="../deps/_Open%20Sans-0.4.1/font.css" rel="stylesheet">
<link href="../deps/_IBM%20Plex%20Mono-0.4.1/font.css" rel="stylesheet">
<link href="../deps/_Roboto%20Slab-0.4.1/font.css" rel="stylesheet">
<!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous">
<!-- bootstrap-toc --><script src="https://cdn.rawgit.com/afeld/bootstrap-toc/v1.0.1/dist/bootstrap-toc.min.js"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- search --><script src="https://cdnjs.cloudflare.com/ajax/libs/fuse.js/6.4.6/fuse.js" integrity="sha512-zv6Ywkjyktsohkbp9bb45V6tEMoWhzFzXis+LrMehmJZZSys19Yxf1dopHx7WzIKxr5tK2dVcYmaCk2uqdjF4A==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/autocomplete.js/0.38.0/autocomplete.jquery.min.js" integrity="sha512-GU9ayf+66Xx2TmpxqJpliWbT5PiGYxpaG8rfnBEk1LL8l1KGkRShhngwdXK1UgqhAzWpZHSiYPc09/NwDQIGyg==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mark.js/8.11.1/mark.min.js" integrity="sha512-5CYOlHXGh6QpOFA/TeTylKLWfB3ftPsde7AnmhuitiTX4K5SqCLBeKro6sPS8ilsz1Q4NRx3v8Ko2IBiszzdww==" crossorigin="anonymous"></script><!-- pkgdown --><script src="../pkgdown.js"></script><link href="../extra.css" rel="stylesheet">
<meta property="og:title" content="Get started">
<meta property="og:description" content="This vignette describes how to install the package PINstimation, and provides several examples on how to use its main functionalities. 
">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]--><!-- Global site tag (gtag.js) - Google Analytics --><script async src="https://www.googletagmanager.com/gtag/js?id=G-0SVLS0LDBY"></script><script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'G-0SVLS0LDBY');
</script>
</head>
<body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>
    

    <nav class="navbar fixed-top navbar-dark navbar-expand-lg bg-primary"><div class="container">
    
    <a class="navbar-brand me-2" href="../index.html">PINstimation</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="Released version">0.1.0</small>

    
    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto">
<li class="active nav-item">
  <a class="nav-link" href="../articles/PINstimation.html">Get started</a>
</li>
<li class="nav-item">
  <a class="nav-link" href="../research.html" aria-label="Research">Research</a>
</li>
<li class="nav-item">
  <a class="nav-link" href="../reference/index.html">Reference</a>
</li>
<li class="nav-item dropdown">
  <a href="#" class="nav-link dropdown-toggle" data-bs-toggle="dropdown" role="button" aria-expanded="false" aria-haspopup="true" id="dropdown-articles">Articles</a>
  <div class="dropdown-menu" aria-labelledby="dropdown-articles">
    <a class="dropdown-item" href="../articles/parallel_processing.html">PINstimation - Parallel Processing</a>
  </div>
</li>
<li class="nav-item">
  <a class="nav-link" href="../package-authors.html" aria-label="Authors">Authors</a>
</li>
<li class="nav-item">
  <a class="nav-link" href="../news/index.html">Changelog</a>
</li>
      </ul>
<form class="form-inline my-2 my-lg-0" role="search">
        <input type="search" class="form-control me-sm-2" aria-label="Toggle navigation" name="search-input" data-search-index="../search.json" id="search-input" placeholder="Search for" autocomplete="off">
</form>

      <ul class="navbar-nav">
<li class="nav-item">
  <a class="external-link nav-link" href="https://github.com/monty-se/">
    <span class="fa fa-github"></span>
     
    Github
  </a>
</li>
      </ul>
</div>

    
  </div>
</nav><div class="container template-article">




<div class="row">
  <main id="main"><div class="page-header">
      <img src="" class="logo" alt=""><h1>Get started</h1>
            
      
      <small class="dont-index">Source: <a href="https://github.com/monty-se/PINstimation/blob/HEAD/vignettes/PINstimation.rmd" class="external-link"><code>vignettes/PINstimation.rmd</code></a></small>
      <div class="d-none name"><code>PINstimation.rmd</code></div>
    </div>

    
    
<div class="section level2">
<h2 id="overview">Overview<a class="anchor" aria-label="anchor" href="#overview"></a>
</h2>
<hr>
<p>This vignette describes how to install the package ‘PINstimation’, either in its stable version on CRAN, or in its development version of Github. It also provides several usage examples on how to use the different functionalities of the package.</p>
</div>
<div class="section level2">
<h2 id="installation">Installation<a class="anchor" aria-label="anchor" href="#installation"></a>
</h2>
<hr>
<p>The easiest way to get PINstimation is the following:</p>
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu"><a href="https://rdrr.io/r/utils/install.packages.html" class="external-link">install.packages</a></span><span class="op">(</span><span class="st">"PINstimation"</span><span class="op">)</span></code></pre></div>
<p>To get a bug fix or to use a feature from the development version, you can install the development version of PINstimation from GitHub.</p>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="co"># install.packages("devtools")</span>
<span class="co"># library(devtools)</span>
<span class="fu">devtools</span><span class="fu">::</span><span class="fu"><a href="https://devtools.r-lib.org/reference/remote-reexports.html" class="external-link">install_github</a></span><span class="op">(</span><span class="st">"monty-se/PINstimation"</span><span class="op">)</span></code></pre></div>
<p>Loading the package</p>
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://www.pinstimation.com">PINstimation</a></span><span class="op">)</span></code></pre></div>
</div>
<div class="section level2">
<h2 id="note-to-frequent-users">Note to frequent users<a class="anchor" aria-label="anchor" href="#note-to-frequent-users"></a>
</h2>
<hr>
<p>If you are a frequent user of PINstimation, you might want to avoid repetitively loading the package PINstimation whenever you open a new R session. You can do that by adding PINstimation to <code>.R profile</code> either manually, or using the function <code>load_pinstimation_for_good()</code>.</p>
<p>To automatically load PINstimation, run <code>load_pinstimation_for_good()</code>, and the following code will be added to your .R profile.</p>
<div class="sourceCode" id="cb4"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="kw">if</span> <span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/interactive.html" class="external-link">interactive</a></span><span class="op">(</span><span class="op">)</span><span class="op">)</span> <span class="fu"><a href="https://rdrr.io/r/base/message.html" class="external-link">suppressMessages</a></span><span class="op">(</span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">require</a></span><span class="op">(</span><span class="va"><a href="https://www.pinstimation.com">PINstimation</a></span><span class="op">)</span><span class="op">)</span></code></pre></div>
<p>After restart of the R session, PINstimation will be loaded automatically, whenever a new R session is started. To remove the automatic loading of PINstimation, just open the .R profile for editing <code><a href="https://usethis.r-lib.org/reference/edit.html" class="external-link">usethis::edit_r_profile()</a></code>, find the code above, and delete it.</p>
</div>
<div class="section level2">
<h2 id="usage-examples">Usage examples<a class="anchor" aria-label="anchor" href="#usage-examples"></a>
</h2>
<hr>
<p>Below, you find five usage examples for the main functions in the package.</p>
<ul>
<li><p><strong>Example 1</strong>: [PIN] Use daily trade data to estimate the standard probability of informed trading.</p></li>
<li><p><strong>Example 2</strong>: [MPIN] Use daily trade data to estimate the number of layers in the data, as well as the multi-layer probability of informed trading.</p></li>
<li><p><strong>Example 3</strong>: [AdjPIN] Use daily trade data to estimate the adjusted probability of informed trading.</p></li>
<li><p><strong>Example 4</strong>: [VPIN] Use high-frequency data to estimate the volume-adjusted probability of informed trading.</p></li>
<li><p><strong>Example 5</strong>: Classify high frequency trades into daily trading data, and use it to estimate the adjusted probability of informed trading using the Maximum-likelihood method, and the Expectation-Maximization algorithm.</p></li>
</ul>
<div class="section level3">
<h3 id="example-1-estimate-the-pin-model">Example 1: Estimate the PIN model<a class="anchor" aria-label="anchor" href="#example-1-estimate-the-pin-model"></a>
</h3>
<hr>
<p>We estimate the PIN model on preloaded dataset <code>dailytrades</code> using the initial parameter sets of Ersan &amp; Alici (2006).</p>
<div class="sourceCode" id="cb5"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">estimate</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/pin_ea.html">pin_ea</a></span><span class="op">(</span><span class="va">dailytrades</span><span class="op">)</span></code></pre></div>
<pre><code><span class="co">## [+] PIN Estimation started </span>
<span class="co">##   |[1] Likelihood function factorization: Ersan (2016)</span>
<span class="co">##   |[2] Loading initial parameter sets    : 5 EA initial set(s) loaded</span>
<span class="co">##   |[3] Estimating PIN model (1996)   : Using Maximum Likelihood Estimation</span>
<span class="co">##   |+++++++++++++++++++++++++++++++++++++| 100% of PIN estimation completed</span>
<span class="co">## [+] PIN Estimation completed</span></code></pre>
<div class="sourceCode" id="cb7"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu">show</span><span class="op">(</span><span class="va">estimate</span><span class="op">)</span></code></pre></div>
<pre><code><span class="co">## ----------------------------------</span>
<span class="co">## PIN estimation completed successfully</span>
<span class="co">## ----------------------------------</span>
<span class="co">## Initial parameter sets   : Ersan and Alici (2016)</span>
<span class="co">## Likelihood factorization: Ersan (2016)</span>
<span class="co">## ----------------------------------</span>
<span class="co">## 5 initial set(s) are used in the estimation </span>
<span class="co">## Type object@initialsets to see the initial parameter sets used</span>
<span class="co">## </span>
<span class="co">## <span style="color: #BBBBBB; background-color: #BB0000;"> PIN model </span> </span>
<span class="co">## </span>
<span class="co">## ==========  ===========</span>
<span class="co">## Variables   Estimates  </span>
<span class="co">## ==========  ===========</span>
<span class="co">## alpha       0.749997   </span>
<span class="co">## delta       0.133334   </span>
<span class="co">## mu          1193.52    </span>
<span class="co">## eps.b       357.27     </span>
<span class="co">## eps.s       328.63     </span>
<span class="co">## ----                   </span>
<span class="co">## Likelihood  (3226.469) </span>
<span class="co">## PIN         0.566172   </span>
<span class="co">## ==========  ===========</span>
<span class="co">## </span>
<span class="co">## -------</span>
<span class="co">## Running time: 1.162 seconds</span></code></pre>
</div>
<div class="section level3">
<h3 id="example-2-estimate-the-multilayer-pin-model">Example 2: Estimate the Multilayer PIN model<a class="anchor" aria-label="anchor" href="#example-2-estimate-the-multilayer-pin-model"></a>
</h3>
<hr>
<p>We run the estimation of the MPIN model on preloaded dataset <code>dailytrades</code> using:</p>
<ul>
<li>the maximum-likelihood method.</li>
</ul>
<div class="sourceCode" id="cb9"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">ml_estimate</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/mpin_ml.html">mpin_ml</a></span><span class="op">(</span><span class="va">dailytrades</span><span class="op">)</span></code></pre></div>
<pre><code><span class="co">## [+] MPIN estimation started</span>
<span class="co">##   |[1] Detecting layers from data    : using Ersan and Ghachem (2022a)</span>
<span class="co">##   |[=] Number of layers in the data  : 3 information layer(s) detected</span>
<span class="co">##   |[2] Computing initial parameter sets : using algorithm of Ersan (2016)</span>
<span class="co">##   |[3] Estimating the MPIN model     : Maximum-likelihood standard estimation</span>
<span class="co">##   |+++++++++++++++++++++++++++++++++++++| 100% of mpin estimation completed</span>
<span class="co">## [+] MPIN estimation completed</span></code></pre>
<ul>
<li>the ECM algorithm.</li>
</ul>
<div class="sourceCode" id="cb11"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">ecm_estimate</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/mpin_ecm.html">mpin_ecm</a></span><span class="op">(</span><span class="va">dailytrades</span><span class="op">)</span></code></pre></div>
<pre><code><span class="co">## [+] MPIN estimation started</span>
<span class="co">##   |[1] Computing the range of layers     : information layers from 1 to 8</span>
<span class="co">##   |[2] Computing initial parameter sets : using algorithm of Ersan (2016)</span>
<span class="co">##   |[=] Selecting initial parameter sets : max 100 initial sets per estimation</span>
<span class="co">##   |[3] Estimating the MPIN model     : Expectation-Conditional Maximization algorithm</span>
<span class="co">##   |+++++++++++++++++++++++++++++++++++++| 100% of estimation completed [8 layer(s)]</span>
<span class="co">##   |[3] Selecting the optimal model   : using lowest Information Criterion (BIC)</span>
<span class="co">## [+] MPIN estimation completed</span></code></pre>
<p>Compare the aggregate parameters obtained from the ML, and ECM estimations.</p>
<div class="sourceCode" id="cb13"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">mpin_comparison</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/cbind.html" class="external-link">rbind</a></span><span class="op">(</span><span class="va">ml_estimate</span><span class="op">@</span><span class="va">aggregates</span>, <span class="va">ecm_estimate</span><span class="op">@</span><span class="va">aggregates</span><span class="op">)</span>
<span class="fu"><a href="https://rdrr.io/r/base/colnames.html" class="external-link">rownames</a></span><span class="op">(</span><span class="va">mpin_comparison</span><span class="op">)</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"ML"</span>, <span class="st">"ECM"</span><span class="op">)</span></code></pre></div>
<pre><code><span class="co">## Probabilities of ML, and ECM estimations of the MPIN model</span></code></pre>
<pre><code><span class="co">##        alpha     delta       mu    eps.b    eps.s</span>
<span class="co">## ML  0.750004 0.1333320 1210.984 336.9118 335.8871</span>
<span class="co">## ECM 0.750000 0.1333333 1211.001 336.9052 335.8866</span></code></pre>
<p>Display the summary of the model estimates for all number of layers.</p>
<div class="sourceCode" id="cb16"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">summary</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/estimate.mpin.ecm-class.html">getSummary</a></span><span class="op">(</span><span class="va">ecm_estimate</span><span class="op">)</span></code></pre></div>
<pre><code><span class="co">##          layers em.layers  MPIN Likelihood    AIC    BIC    AWE</span>
<span class="co">## Model[1]      1         1 0.566  -3226.469 6462.9 6473.4 6508.9</span>
<span class="co">## Model[2]      2         2 0.577   -800.379 1616.8 1633.5 1690.3</span>
<span class="co">## Model[3]      3         3 0.574   -643.458 1308.9 1332.0 1410.0</span>
<span class="co">## Model[4]      4         3 0.574   -643.458 1308.9 1332.0 1410.0</span>
<span class="co">## Model[5]      5         3 0.574   -643.458 1308.9 1332.0 1410.0</span>
<span class="co">## Model[6]      6         3 0.574   -643.458 1308.9 1332.0 1410.0</span>
<span class="co">## Model[7]      7         4 0.575   -642.631 1313.3 1342.6 1441.9</span>
<span class="co">## Model[8]      8         4 0.575   -642.631 1313.3 1342.6 1441.9</span></code></pre>
</div>
<div class="section level3">
<h3 id="example-3-estimate-the-adjusted-pin-model">Example 3: Estimate the Adjusted PIN model<a class="anchor" aria-label="anchor" href="#example-3-estimate-the-adjusted-pin-model"></a>
</h3>
<hr>
<p>We estimate the adjusted PIN model on preloaded dataset <code>dailytrades</code> using <code>20</code> initial parameter sets computed by the algorithm of Ersan and Ghachem (2022b).</p>
<div class="sourceCode" id="cb18"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">estimate_adjpin</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/adjpin.html">adjpin</a></span><span class="op">(</span><span class="va">dailytrades</span>, method <span class="op">=</span> <span class="st">"ML"</span>, initialsets <span class="op">=</span> <span class="st">"GE"</span><span class="op">)</span></code></pre></div>
<pre><code><span class="co">## [+] AdjPIN estimation started</span>
<span class="co">##   |[1] Computing initial parameter sets : 20 GE initial sets generated</span>
<span class="co">##   |[2] Estimating the AdjPIN model      : Maximum-likelihood Standard Estimation</span>
<span class="co">##   |+++++++++++++++++++++++++++++++++++++| 100% of AdjPIN estimation completed</span>
<span class="co">## [+] AdjPIN estimation completed</span></code></pre>
<div class="sourceCode" id="cb20"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu">show</span><span class="op">(</span><span class="va">estimate_adjpin</span><span class="op">)</span></code></pre></div>
<pre><code><span class="co">## ----------------------------------</span>
<span class="co">## AdjPIN estimation completed successfully</span>
<span class="co">## ----------------------------------</span>
<span class="co">## Likelihood factorization: Ersan and Ghachem (2022b)</span>
<span class="co">## Estimation Algorithm     : Maximum Likelihood Estimation</span>
<span class="co">## Initial parameter sets   : Ersan and Ghachem (2022b)</span>
<span class="co">## Model Restrictions   : Unrestricted model</span>
<span class="co">## ----------------------------------</span>
<span class="co">## 20 initial set(s) are used in the estimation </span>
<span class="co">## Type object@initialsets to see the initial parameter sets used</span>
<span class="co">## </span>
<span class="co">## <span style="color: #BBBBBB; background-color: #BB00BB;"> AdjPIN model </span> </span>
<span class="co">## </span>
<span class="co">## ===========  ==============</span>
<span class="co">## Variables    Estimates     </span>
<span class="co">## ===========  ==============</span>
<span class="co">## alpha        0.728981      </span>
<span class="co">## delta        0.136121      </span>
<span class="co">## theta        0.049559      </span>
<span class="co">## theta'       0.630315      </span>
<span class="co">## ----                       </span>
<span class="co">## eps.b        336.83        </span>
<span class="co">## eps.s        335.27        </span>
<span class="co">## mu.b         603.21        </span>
<span class="co">## mu.s         869.56        </span>
<span class="co">## d.b          910.49        </span>
<span class="co">## d.s          1.85          </span>
<span class="co">## ----                       </span>
<span class="co">## Likelihood   (893.781)     </span>
<span class="co">## adjPIN       0.296971      </span>
<span class="co">## PSOS         0.274867      </span>
<span class="co">## ===========  ==============</span>
<span class="co">## </span>
<span class="co">## -------</span>
<span class="co">## Running time: 12.14 seconds</span></code></pre>
</div>
<div class="section level3">
<h3 id="example-4-estimate-the-volume-adjusted-pin-model">Example 4: Estimate the Volume-adjusted PIN model<a class="anchor" aria-label="anchor" href="#example-4-estimate-the-volume-adjusted-pin-model"></a>
</h3>
<hr>
<p>We run a VPIN estimation on preloaded dataset <code>hfdata</code> with <code>timebarsize</code> of <code>5</code> minutes (<code>300</code> seconds).</p>
<div class="sourceCode" id="cb22"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">estimate.vpin</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/vpin.html">vpin</a></span><span class="op">(</span><span class="va">hfdata</span>, timebarsize <span class="op">=</span> <span class="fl">300</span><span class="op">)</span></code></pre></div>
<pre><code><span class="co">## [+] VPIN Estimation started.</span>
<span class="co">##   |-[1] Checking and preparing the data...</span>
<span class="co">##   |-[2] Creating 300-second timebars...</span>
<span class="co">##   |-[3] Calculating Volume Bucket Size (VBS) and Sigma(DP)...</span>
<span class="co">##   |-[4] Breaking up large 300-second timebars' volume...</span>
<span class="co">##   |-[5] Assigning 300-second timebars into buckets...</span>
<span class="co">##   |-[6] Balancing timebars and adjusting bucket sizes to VBS...</span>
<span class="co">##   |-[7] Calculating aggregate bucket data...</span>
<span class="co">##   |-[8] Calculating VPIN vector...</span>
<span class="co">## [+] VPIN estimation completed</span></code></pre>
<div class="sourceCode" id="cb24"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu">show</span><span class="op">(</span><span class="va">estimate.vpin</span><span class="op">)</span></code></pre></div>
<pre><code><span class="co">## ----------------------------------</span>
<span class="co">## VPIN estimation completed successfully.</span>
<span class="co">## ----------------------------------</span>
<span class="co">## Type object@vpin to access the VPIN vector.</span>
<span class="co">## Type object@bucketdata to access data used to construct the VPIN vector.</span>
<span class="co">## Type object@dailyvpin to access the daily VPIN vectors.</span>
<span class="co">## </span>
<span class="co">## [+] VPIN descriptive statistics</span>
<span class="co">## </span>
<span class="co">## |      | Min.  | 1st Qu. | Median | Mean  | 3rd Qu. | Max.  | NA's |</span>
<span class="co">## |:-----|:-----:|:-------:|:------:|:-----:|:-------:|:-----:|:----:|</span>
<span class="co">## |value | 0.101 |  0.185  | 0.238  | 0.244 |  0.29   | 0.636 |  49  |</span>
<span class="co">## </span>
<span class="co">## </span>
<span class="co">## [+] VPIN parameters</span>
<span class="co">## </span>
<span class="co">## | tbSize | buckets | samplength |   VBS    | #days |</span>
<span class="co">## |:------:|:-------:|:----------:|:--------:|:-----:|</span>
<span class="co">## |  300   |   50    |     50     | 36321.25 |  77   |</span>
<span class="co">## </span>
<span class="co">## -------</span>
<span class="co">## Running time: 3.753 seconds</span></code></pre>
<p>Plot the unweighted daily vpin stored at the variable <code>dvpin</code> in the dataframe <code>dailyvpin</code> stored at the slot <code>@dailyvpin</code> of the object <code>estimate.vpin</code>.</p>
<div class="sourceCode" id="cb26"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu"><a href="https://rdrr.io/r/graphics/plot.default.html" class="external-link">plot</a></span><span class="op">(</span><span class="va">estimate.vpin</span><span class="op">@</span><span class="va">dailyvpin</span><span class="op">$</span><span class="va">dvpin</span> <span class="op">~</span><span class="fu"><a href="https://rdrr.io/r/base/seq.html" class="external-link">seq_len</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/nrow.html" class="external-link">nrow</a></span><span class="op">(</span><span class="va">estimate.vpin</span><span class="op">@</span><span class="va">dailyvpin</span><span class="op">)</span><span class="op">)</span>,
     lwd<span class="op">=</span><span class="fl">1</span> , type<span class="op">=</span><span class="st">"l"</span> , bty<span class="op">=</span><span class="st">"n"</span> , xlab<span class="op">=</span><span class="st">"day"</span> , ylab<span class="op">=</span><span class="st">"daily vpin"</span>, 
     col<span class="op">=</span><span class="fu"><a href="https://rdrr.io/r/grDevices/rgb.html" class="external-link">rgb</a></span><span class="op">(</span><span class="fl">0.2</span>,<span class="fl">0.4</span>,<span class="fl">0.6</span>,<span class="fl">0.8</span><span class="op">)</span> <span class="op">)</span></code></pre></div>
<p><img src="PINstimation_files/figure-html/Example.4.3-1.png" width="700"></p>
</div>
<div class="section level3">
<h3 id="example-5-estimate-the-adjpin-model-using-aggregated-high-frequency-data">Example 5: Estimate the AdjPIN model using aggregated high-frequency data<a class="anchor" aria-label="anchor" href="#example-5-estimate-the-adjpin-model-using-aggregated-high-frequency-data"></a>
</h3>
<hr>
<p>We use the preloaded high-frequency dataset <code>hfdata</code>, prepare it for aggregation, and then extract <code>500 000</code> trades.</p>
<div class="sourceCode" id="cb27"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">data</span> <span class="op">&lt;-</span> <span class="va">hfdata</span>
<span class="va">data</span><span class="op">$</span><span class="va">volume</span> <span class="op">&lt;-</span> <span class="cn">NULL</span></code></pre></div>
<p>We classify data using the LR algorithm with a time lag of <code>500</code> milliseconds (<code>0.5 s</code>), using the function aggregate_data().</p>
<div class="sourceCode" id="cb28"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">daytrades</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/aggregate_trades.html">aggregate_trades</a></span><span class="op">(</span><span class="va">data</span>, algorithm <span class="op">=</span> <span class="st">"LR"</span>, timelag <span class="op">=</span> <span class="fl">500</span><span class="op">)</span></code></pre></div>
<pre><code><span class="co">## [+] Trade classification started</span>
<span class="co">##   |[=] Classification algorithm         : LR algorithm</span>
<span class="co">##   |[=] Number of trades in dataset        : 100 000 trades</span>
<span class="co">##   |[=] Time lag of lagged variables     : 500 milliseconds</span>
<span class="co">##   |[1] Computing lagged variables         : using parallel processing</span>
<span class="co">##   |+++++++++++++++++++++++++++++++++++++| 100% of variables computed</span>
<span class="co">##   |[=] Computed lagged variables          : in 7.68 seconds</span>
<span class="co">##   |[2] Computing aggregated trades      : using lagged variables</span>
<span class="co">## [+] Trade classification completed                    </span></code></pre>
<p>We use the obtained dataset to estimate the (adjusted) probability of informed trading via the two available estimated methods, i.e, the standard Maximum-likelihood method, and the Expectation-Maximization algorithm.</p>
<div class="sourceCode" id="cb30"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">adjpin_ml</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/adjpin.html">adjpin</a></span><span class="op">(</span><span class="va">daytrades</span>, method <span class="op">=</span> <span class="st">"ML"</span>, initialsets <span class="op">=</span> <span class="st">"GE"</span><span class="op">)</span></code></pre></div>
<pre><code><span class="co">## [+] AdjPIN estimation started</span>
<span class="co">##   |[1] Computing initial parameter sets  : 20 GE initial sets generated</span>
<span class="co">##   |[2] Estimating the AdjPIN model   : Maximum-likelihood Standard Estimation</span>
<span class="co">##   |+++++++++++++++++++++++++++++++++++++| 100% of AdjPIN estimation completed</span>
<span class="co">## [+] AdjPIN estimation completed</span></code></pre>
<div class="sourceCode" id="cb32"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">adjpin_ecm</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/adjpin.html">adjpin</a></span><span class="op">(</span><span class="va">daytrades</span>, method <span class="op">=</span> <span class="st">"ECM"</span>, initialsets <span class="op">=</span> <span class="st">"GE"</span><span class="op">)</span></code></pre></div>
<pre><code><span class="co">## [+] AdjPIN estimation started</span>
<span class="co">##   |[1] Computing initial parameter sets : 20 GE initial sets generated</span>
<span class="co">##   |[2] Estimating the AdjPIN model      : Expectation-Conditional Maximization algorithm</span>
<span class="co">##   |+++++++++++++++++++++++++++++++++++++| 100% of AdjPIN estimation completed</span>
<span class="co">## [+] AdjPIN estimation completed</span></code></pre>
<p>Compare the estimated parameters obtained from the ML, and ECM parameters.</p>
<div class="sourceCode" id="cb34"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">adj.prob</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/cbind.html" class="external-link">rbind</a></span><span class="op">(</span><span class="va">adjpin_ml</span><span class="op">@</span><span class="va">parameters</span><span class="op">[</span><span class="fl">1</span><span class="op">:</span><span class="fl">4</span><span class="op">]</span>, <span class="va">adjpin_ecm</span><span class="op">@</span><span class="va">parameters</span><span class="op">[</span><span class="fl">1</span><span class="op">:</span><span class="fl">4</span><span class="op">]</span><span class="op">)</span>
<span class="fu"><a href="https://rdrr.io/r/base/colnames.html" class="external-link">rownames</a></span><span class="op">(</span><span class="va">adj.prob</span><span class="op">)</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"ML"</span>, <span class="st">"ECM"</span><span class="op">)</span></code></pre></div>
<pre><code><span class="co">## Probabilities of ML, and ECM estimations of the AdjPIN model</span></code></pre>
<pre><code><span class="co">##         alpha     delta     theta    thetap</span>
<span class="co">## ML  0.5925374 0.1511567 0.3597389 0.9999995</span>
<span class="co">## ECM 0.5925419 0.1512520 0.3597634 1.0000000</span></code></pre>
<div class="sourceCode" id="cb37"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">adj.params</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/cbind.html" class="external-link">rbind</a></span><span class="op">(</span><span class="va">adjpin_ml</span><span class="op">@</span><span class="va">parameters</span><span class="op">[</span><span class="fl">5</span><span class="op">:</span><span class="fl">10</span><span class="op">]</span>, <span class="va">adjpin_ecm</span><span class="op">@</span><span class="va">parameters</span><span class="op">[</span><span class="fl">5</span><span class="op">:</span><span class="fl">10</span><span class="op">]</span><span class="op">)</span>
<span class="fu"><a href="https://rdrr.io/r/base/colnames.html" class="external-link">rownames</a></span><span class="op">(</span><span class="va">adj.params</span><span class="op">)</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"ML"</span>, <span class="st">"ECM"</span><span class="op">)</span></code></pre></div>
<pre><code><span class="co">## Rate parameters of ML and ECM estimations of the AdjPIN model</span></code></pre>
<pre><code><span class="co">##        eps.b    eps.s     mu.b     mu.s      d.b      d.s</span>
<span class="co">## ML  549.8239 546.3564 47.76120 71.67589 212.7528 223.7200</span>
<span class="co">## ECM 549.8333 546.3333 47.76279 71.76036 212.7464 223.7497</span></code></pre>
</div>
</div>
<div class="section level2">
<h2 id="getting-help">Getting help<a class="anchor" aria-label="anchor" href="#getting-help"></a>
</h2>
<hr>
<p>If you encounter a clear bug, please file an issue with a minimal reproducible example on <a href="https://github.com/monty-se/PINstimation/issues" class="external-link">GitHub</a>.</p>
</div>
  </main><aside class="col-md-3"><nav id="toc"><h2>On this page</h2>
    </nav></aside>
</div>



    <footer><div class="pkgdown-footer-left">
  <p></p>
<p>Developed by <a href="package-authors.html">Montasser Ghachem</a>, <a href="package-authors.html">Oguz Ersan</a>.</p>
</div>

<div class="pkgdown-footer-right">
  <p></p>
<p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.3.</p>
</div>

    </footer>
</div>

  

  

  </body>
</html>
